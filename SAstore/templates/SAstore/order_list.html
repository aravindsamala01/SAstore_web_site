{% extends 'base.html' %}

{% block content %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">

<div class="container my-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>🛒 My Orders</h2>
    <a href="{% url 'home' %}" class="btn btn-outline-primary">🏠 Home</a>
  </div>

  {% if orders %}
    {% for order in orders %}
      <div class="card shadow-sm mb-4">
        <div class="card-header bg-primary text-white">
          <strong>Order #{{ order.id }}</strong> - {{ order.created_at|date:"F d, Y, P" }}
        </div>
        <div class="card-body">
          <p><i class="bi bi-person-fill"></i> <strong>Name:</strong> {{ order.full_name }}</p>
          <p><i class="bi bi-envelope-fill"></i> <strong>Email:</strong> {{ order.email_address }}</p>
          <p><i class="bi bi-geo-alt-fill"></i> <strong>Address:</strong> {{ order.address }}</p>

          <h5 class="mt-4">🧾 Items:</h5>
          <ul class="list-group list-group-flush">
            {% for item in order.orderitem_set.all %}
              <li class="list-group-item d-flex justify-content-between align-items-center">
                {{ item.product.name }} (x{{ item.quantity }})
                <span class="badge bg-success rounded-pill">₹{{ item.price }}</span>
              </li>
            {% endfor %}
          </ul>
        </div>
      </div>
    {% endfor %}
  {% else %}
    <div class="alert alert-info">You have no orders.</div>
  {% endif %}
</div>

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
{% endblock %}
